{"version":3,"file":"src_components_atoms_Map_svelte-src_components_atoms_TextField_svelte.js","mappings":"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","sources":["webpack://webpack/./src/components/atoms/Map.svelte","webpack://webpack/./src/components/atoms/TextField.svelte"],"sourcesContent":["<script>\r\n    import { onMount } from \"svelte\";\r\n    import { Loader } from \"google-maps\";\r\n    import { createEventDispatcher } from \"svelte\";\r\n    const dispatch = createEventDispatcher();\r\n\r\n    export let address = \"\";\r\n    export let _lat = \"\";\r\n    export let _lng = \"\";\r\n    export let textfield = \"\";\r\n\r\n    onMount(async () => {\r\n        const loader = new Loader(\"AIzaSyAmlMcGgumMqP6T8YLFnsQT_tbL4j5wF0s\", {\r\n            libraries: [\"places\"],\r\n        });\r\n\r\n        const google = await loader.load();\r\n\r\n        const geocoder = new google.maps.Geocoder();\r\n        const infowindow = new google.maps.InfoWindow();\r\n\r\n        let longlat = await codeAddress();\r\n\r\n        const map = new google.maps.Map(document.getElementById(\"map\"), {\r\n            center: { lat: longlat.lat, lng: longlat.lng },\r\n            zoom: longlat.zoom,\r\n        });\r\n        map.panTo({ lat: longlat.lat, lng: longlat.lng });\r\n\r\n        let marker = new google.maps.Marker({\r\n            position: { lat: longlat.lat, lng: longlat.lng },\r\n            map,\r\n            title: \"Drag me to the exact position\",\r\n            draggable: true,\r\n        });\r\n\r\n        geocodeLatLng(\r\n                geocoder,\r\n                map,\r\n                infowindow,\r\n                longlat.lat,\r\n                longlat.lng\r\n            );\r\n\r\n        map.addListener(\"click\", (event) => {\r\n            console.log(\"Clicked\", event.latLng.lat(), event.latLng.lng());\r\n            console.log(event);\r\n            marker.setPosition(event.latLng);\r\n            let geo = geocodeLatLng(\r\n                geocoder,\r\n                map,\r\n                infowindow,\r\n                event.latLng.lat(),\r\n                event.latLng.lng()\r\n            );\r\n        });\r\n\r\n        marker.addListener(\"dragend\", function (event) {\r\n            console.log(event.latLng);\r\n            let geo = geocodeLatLng(\r\n                geocoder,\r\n                map,\r\n                infowindow,\r\n                event.latLng.lat(),\r\n                event.latLng.lng()\r\n            );\r\n        });\r\n\r\n        let input = textfield;\r\n\r\n        let ac = new google.maps.places.Autocomplete(input, {\r\n            componentRestrictions: { country: \"th\" },\r\n        });\r\n\r\n        ac.addListener(\"place_changed\", (event) => {\r\n            let p = ac.getPlace();\r\n            map.setCenter({ lat: p.geometry.location.lat(), lng: p.geometry.location.lng() });\r\n            map.setZoom(18);\r\n            marker.setPosition({ lat: p.geometry.location.lat(), lng: p.geometry.location.lng() });\r\n\r\n            let geo = geocodeLatLng(\r\n                geocoder,\r\n                map,\r\n                infowindow,\r\n                p.geometry.location.lat(),\r\n                p.geometry.location.lng()\r\n            );\r\n        });\r\n\r\n        async function getCoords() {\r\n            const pos = await new Promise((resolve, reject) => {\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position) => resolve(position),\r\n                    (error) => reject(error)\r\n                );\r\n            });\r\n            return {\r\n                lng: pos.coords.longitude,\r\n                lat: pos.coords.latitude,\r\n            };\r\n        }\r\n\r\n        async function codeAddress() {\r\n            let coords;\r\n            try {\r\n                \r\n                 coords = await getCoords();\r\n            } catch (error) {\r\n                 coords = { lat: 13.7563, lng: 100.5018};\r\n            }\r\n\r\n            if (!address) return { lat: coords.lat, lng: coords.lng, zoom: 8 };\r\n            \r\n            let results ;\r\n            try {\r\n                 results = await geocoder.geocode({ address: address });\r\n            } catch (error) {\r\n                return { lat: 13.7563, lng: 100.5018, zoom: 8 }\r\n            }\r\n            \r\n            return {\r\n                lat: results.results[0].geometry.location.lat(),\r\n                lng: results.results[0].geometry.location.lng(),\r\n                zoom: 18,\r\n            };\r\n        }\r\n\r\n\r\n        function geocodeLatLng(geocoder, map, infowindow, lat, lng) {\r\n            console.log(\"GEOCODING\", lat, lng);\r\n            const latlng = {\r\n                lat: lat,\r\n                lng: lng,\r\n            };\r\n\r\n            geocoder\r\n                .geocode({ location: latlng })\r\n                .then((response) => {\r\n                    if (response.results[0]) {\r\n                        marker.setPosition(latlng);\r\n                        _lat = lat;\r\n                        _lng = lng;\r\n                        console.log(\"Latlng IZ\", lat, lng);\r\n                        console.log(response.results[0]);\r\n                        let c = response.results[0].address_components;\r\n                        let finalAddress = `${c[0].long_name}, ${c[1].long_name}, ${c[2].long_name}`;\r\n                        infowindow.setContent(finalAddress);\r\n                        infowindow.open(map, marker);\r\n                        address = finalAddress;\r\n                        dispatch(\"updateAddres\", address);\r\n                    } else {\r\n                        window.alert(\"No results found\");\r\n                    }\r\n                })\r\n                .catch((e) => console.log(\"Geocoder failed due to: \" + e));\r\n        }\r\n    });\r\n</script>\r\n\r\n<div class=\"col w100 grow h100\">\r\n    <!-- <input  bind:value={address}  /> -->\r\n    <div class=\"curve overflow-hidden w100 grow\">\r\n        <div id=\"map\" class=\"curved w100 h-400 w100 grow black--text\" />\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    #map {\r\n        height: 100%;\r\n    }\r\n</style>\r\n","<script>\r\n    import Icon from \"@iconify/svelte\";\r\n    import { createEventDispatcher } from \"svelte\";\r\n    const dispatch = createEventDispatcher();\r\n    export let label = \"\";\r\n    export let ref = \"\";\r\n    export let type = \"text\";\r\n    export let value = \"\";\r\n    export let name = \"\";\r\n    export let disable = false;\r\n\r\n    let handleKeyup = (val) => {\r\n        dispatch(\"keyup\", val);\r\n    };\r\n    let handleBlur = (val) => {\r\n        dispatch(\"blur\", val);\r\n    };\r\n    let handleChange = (val) => {\r\n        dispatch(\"change\", val);\r\n    };\r\n    function typeAction(node) {\r\n        node.type = type;\r\n    }\r\n</script>\r\n\r\n<input\r\n    on:keyup={handleKeyup}\r\n    on:blur={handleBlur}\r\n    on:change={handleChange}\r\n    {name}\r\n    bind:value\r\n    bind:this={ref}\r\n    use:typeAction\r\n    class:disable\r\n    disabled={disable}\r\n    class=\"borderStrong gap-10 curve align-center px-20 h-40 mobile-w100 shade2 w100 slow\"\r\n    placeholder={label}\r\n/>\r\n\r\n<style>\r\n    input {\r\n        outline: 1px solid rgba(255, 255, 255, 0);\r\n        cursor: text;\r\n    }\r\n\r\n    input:focus-visible {\r\n        outline: 1px solid rgba(255, 255, 255, 0.6);\r\n    }\r\n\r\n    .disable {\r\n        cursor: not-allowed;\r\n    }\r\n</style>\r\n"],"names":[],"sourceRoot":""}